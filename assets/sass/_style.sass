// COLORS
.projects__section,
.projects__page
    main
        background-color: $orange
    footer .calligram svg
        fill: $orange
    @include media-breakpoint-down(desktop)
        .toc-container,
        .toc-cta
            background-color: $orange
.posts__section,
.posts__page,
    main
        background-color: $green
    @include media-breakpoint-down(desktop)
        .toc-container,
        .toc-cta
            background-color: $green
.posts__section,
.posts__page
    footer .calligram svg
        fill: $green
.page__home,
.persons__section
    main
        --color-text: var(--color-accent)
        color: var(--color-text)
        background-color: $blue
    footer .calligram svg
        fill: $blue
    @include media-breakpoint-down(desktop)
        .toc-container,
        .toc-cta
            --color-text: var(--color-accent)
            color: var(--color-text)
            background-color: $blue

body:not(.page__home) 
    .media,
    figure
        mix-blend-mode: multiply

// Yellow hero
.page__home,
.posts__page
    .hero
        background: $yellow
        color: black

// links with pencil line
@mixin sketch-underline
    &::after
        content: ''
        background:
            image: url('/assets/images/decorations/line_04_black.png')
            size: cover
            position: center
        height: pxToRem(18)
        width: 100%
        @include media-breakpoint-up(desktop)
            bottom: -8px
            left: 0
            position: absolute

// Layout
.pages__section
    .blocks
        font-family: $heading-font-family
        line-height: $body-normal-line-height-desktop
        @include media-breakpoint-down(desktop)
            font-size: $body-normal-font-size
            line-height: $body-normal-line-height
    &.full-width
        .document-content
            .blocks
                @include media-breakpoint-up(desktop)
                    .text, 
                    .block-contact 
                        margin-left: offset(3)
                        width: columns(7)
                        .informations
                            display: block
                            [itemprop="name"] + div
                                margin-top: $spacing-1
                        .contacts
                            @include grid(2)
                            h2
                                @include meta
.posts,
.projects
    &__section
        main
            padding-bottom: $spacing-6

// Breadcrumb
.persons__section,
.posts__section,
.projects__section,
.pages__section
    nav.breadcrumb-nav
        @extend .sr-only

// Header
header#document-header
    .menu
        ul li 
            padding: $spacing-1 $spacing-2
            a
                padding: 0
                position: relative
                &:hover
                    @include sketch-underline
            &:last-child
                padding-right: 0
        .active
            @include sketch-underline
    > nav
        .header-button
            span:first-child
                @extend .sr-only
            span:last-child::before
                content: '' !important
                background:
                    image: url('/assets/images/decorations/menu.png')
                    size: contain
                    position: center
                width: pxToRem(41)
                height: pxToRem(39)
            &[aria-expanded="true"]
                span:last-child::before
                    background-image: url('/assets/images/decorations/close.png')
    @include media-breakpoint-down(desktop)
        .has-menu-opened &
            height: 100%
            > nav,
            .container,
            .menu.is-opened
                height: 100%
                ul 
                    height: calc(100% - #{$header-height})
                    display: flex
                    flex-direction: column
                    justify-content: center
                    li
                        border: none
                        padding-left: 0
                        padding-right: 0
                        a
                            display: flex
                            align-items: center
                            font-family: $body-font-family
                            font-size: $h1-size
                            &.active::after
                                flex: 1
                                margin-left: $spacing-3

// TOC
.toc-container
    @include media-breakpoint-down(desktop)
        @include h3

// Home
.page__home
    main
        padding-bottom: $block-space-y
    .hero
        .lead
            font-family: $h1-font-family
            font-size: $h1-size
            text-transform: lowercase
            margin-top: $spacing-2
            p + p
                margin-top: 0
        .lead,
        h1
            @include media-breakpoint-up(desktop)
                font-size: $h1-size-desktop
                line-height: 1
                margin-top: $spacing-4
            @include media-breakpoint-up(xxl)
                font-size: $h1-size-xxl
        .content
            align-items: baseline
            column-gap: var(--grid-gutter)
            padding-top: 0
        .hero-text
            margin-top: 0
            width: auto
        .hero-abstracts
            display: flex
            flex: 1
            flex-direction: column-reverse
            picture
                position: relative
                &::after
                    background:
                        image: url('/assets/images/decorations/line_04_black.png')
                        position: center
                        repeat: no-repeat
                        size: 100%
                    content: ''
                    height: pxToRem(19)
                    position: absolute
                    width: 100%
                    bottom: -$spacing-3
        @include media-breakpoint-down(desktop)
            padding-bottom: $spacing-4
            .hero-abstracts
                figure
                    margin: 0
            .hero-text
                margin-bottom: $spacing-3
            .lead
                margin-top: calc(#{$spacing-4} - #{$spacing-1})
    .document-content
        .block-chapter
            background:
            .rich-text a
                position: relative
                text-decoration: none
                &::before
                    content: ''
                    background:
                        image: url('/assets/images/decorations/line_02_white.png')
                        position: center
                        repeat: no-repeat
                        size: cover
                    height: pxToRem(16)
                    position: absolute
                    width: 100%
                    left: 0
                    bottom: -8px
        .block.block-image
            margin-top: 0
            mix-blend-mode: multiply
            position: absolute
            width: 100%
            + .block-chapter
                margin-top: 0
            .block-content
                width: columns(5)
                figure
                    width: 100%
            @include media-breakpoint-down(desktop)
                top: space(78)
                .block-content
                    margin: -$spacing-3 calc(var(--grid-gutter) + var(--column-width))
                    width: auto
            @include media-breakpoint-up(desktop)
                top: space(60)
                z-index: 0
                .block-content
                    padding-left: 0
                    // margin-right: columns(7)
                    picture
                        max-width: 100%
        .blocks > *:not(.block-image)
            position: relative
            z-index: 1
    @include media-breakpoint-down(desktop)
        .block + .block-chapter
            padding-bottom: 0
            padding-top: 0

// Hero
body:not(.page__home, .projects__section, .projects__page)
    .hero
        .hero-text
            width: 100%
            h1
                text-align: center
.hero
    @include media-breakpoint-down(desktop)
        .posts__section &,
        .projects__section &
            margin-bottom: 0
    @include media-breakpoint-up(desktop)
        .posts__section &
            margin-bottom: $spacing-2
        .breadcrumb-nav
            .breadcrumb
                padding-right: 0
                justify-content: center
        body:not(.page__home, .projects__section, .posts__page) &
            .content
                .hero-text
                    margin-top: $spacing-5

// Footer
footer#document-footer
    ul:not(.dropdown-menu)
        &, &.footer-social.site-links
            li + li
                margin-top: 0
        @include media-breakpoint-up(desktop)
            &.nav-social > li a, 
            &.footer-social.site-links a
                position: relative
                &:hover
                    @include sketch-underline
                    &::after
                        display: block
                        bottom: -(pxToRem(12))
    .footer-social.site-links
        li::after
            transform: translateY(-2px)
    .footer-banner
        display: flex
        justify-content: center
        gap: var(--grid-gutter)
        position: relative
        ul
            display: flex
            gap: var(--grid-gutter)
            a
                @include meta
        @include media-breakpoint-up(desktop)
            ul
                position: absolute
                a
                    line-height: 1
                    text-decoration: none
            .nav-social
                left: var(--grid-gutter)
                li:nth-child(2)::after
                    display: none
            .footer-social
                right: var(--grid-gutter)
                li
                    flex-direction: row-reverse
                    &::after
                        margin-left: 0
                        margin-right: $spacing-2
        @include media-breakpoint-down(desktop)
            align-items: center
            flex-direction: column
            gap: $spacing-4
            width: 100%
            .footer-social
                justify-content: space-between
                width: 100%
            .nav-social
                display: block
                text-align: center
            .calligram
                order: -1
    .calligram svg
        max-height: pxToRem(200)
        width: 100%
    @include media-breakpoint-down(desktop)
        .calligram
            margin-top: 0
        .footer-expertises
            font-size: $body-size-desktop
            @include media-breakpoint-up(md)
                width: 40%
                li:nth-child(even)
                    width: 17ch
            li
                + li
                    margin-top: space(25) !important
                &:nth-child(odd)
                    width: columns(8)
                &:nth-child(even)
                    text-align: right
                    margin-left: auto
                    width: columns(6)
                &::before,
                &::after
                    background:
                        image: url('/assets/images/decorations/line_04_black.png')
                        position: center
                        repeat: no-repeat
                        size: cover
                    height: pxToRem(20)
                    position: absolute
                    width: pxToRem(150)
                &:nth-child(odd)
                    &::after
                        content: ''
                        left: var(--column-width)
                        top: space(18)
                        transform: rotate(34.51deg)
                        @include media-breakpoint-up(md)
                            left: 0
                &:nth-child(even)
                    &::after
                        content: ''
                        right: 0
                        top: space(24)
                        transform: rotate(-34.51deg)
                        @include media-breakpoint-up(md)
                            right: 5%
            ul:nth-child(2)
                display: flex
                flex-direction: column-reverse
                li:nth-child(even)
                    width: columns(7)
                li:first-child
                    margin-top: space(25)
                    max-width: 17ch
                    &::after
                        content: none
    .footer-expertises
        li
            position: relative
        @include media-breakpoint-up(desktop)
            display: block
            ul
                display: flex
                width: 100%
                li
                    max-width: 21ch
                    text-align: center
                &:first-of-type
                    justify-content: space-between
                    li
                        &::before,
                        &::after
                            background:
                                image: url('/assets/images/decorations/line_04_black.png')
                                position: center
                                repeat: no-repeat
                                size: cover
                            height: pxToRem(19)
                            position: absolute
                            width: columns(2)
                            top: space(18)
                            @include media-breakpoint-up(xxl)
                                top: space(23)
                        &:not(:first-child)
                            &::before
                                content: ''
                                right: calc(100% - #{$spacing-3})
                                transform: rotate(-34.51deg)
                                @include media-breakpoint-up(xxl)
                                    right: 82%
                                @media screen and (min-width: 1700px)
                                    right: 92%
                        &:not(:last-child)
                            &::after
                                content: ''
                                left: calc(100% - #{$spacing-3})
                                transform: rotate(34.51deg)
                                @include media-breakpoint-up(xxl)
                                    left: 100%
                                @media screen and (min-width: 1450px)
                                    left: 78%
                                @media screen and (min-width: 1700px)
                                    left: 85%
                        &:first-child::after
                            left: offset(1)
                            @include media-breakpoint-up(xxl)
                                left: calc(#{columns(1)} + #{space(5)})
                            @media screen and (min-device-width: 1400px) and (max-device-width: 1450px)
                                left: calc(#{columns(1)} + #{space(6)})
                            @media screen and (min-width: 1900px)
                                left: 50%
                        &:last-child::before
                            right: offset(1)
                            @include media-breakpoint-up(xxl)
                                right: calc(#{columns(1)} + #{space(5)})
                            @media screen and (min-width: 1900px)
                                right: 50%
                + ul
                    justify-content: space-around
                    margin-top: space(25)
                    @include media-breakpoint-up(xxl)
                        margin-top: space(30)
                    @media screen and (min-width: 1700px)
                        margin-top: space(35)


// Blocks
.block-chapter--accent_background
    @include in-page-with-or-without-sidebar
        .chapter
            .text
                font-size: $block-chapter-layout-accent-font-size
                line-height: 100%
                padding-left: 0
                padding-right: 0
                b
                    font-family: $accent-font-family
                    text-transform: uppercase
        &.block-class-image-left 
            .text
                padding-top: 0
                padding-bottom: 0
        &.block-class-image-right 
            .text
                padding-top: $spacing-2
    @include in-page-without-sidebar
        .text
            margin: auto
            text-align: center
    &.block-class-image-inside-text
        .chapter
            figure
                margin-bottom: $spacing-2
                img
                    height: pxToRem(30)
                    width: auto
            @include media-breakpoint-up(desktop)
                flex-direction: row
                align-items: baseline
                gap: space(3)
                .text 
                    padding-bottom: $spacing-2 !important
        .text b
            @extend .sr-only
    &.block-class-image-left,
    &.block-class-image-right
        .block-title
            @extend .sr-only
        .text a
            text-transform: lowercase
            &::after
                display: none
            @include media-breakpoint-down(desktop)
                display: block
                margin-top: space()
                width: fit-content
    &.block-class-image-left
        figure
            margin-left: calc(var(--column-width) + (var(--column-width) / 2))
    &.block-class-image-right
        figure
            margin-left: auto
            margin-right: var(--column-width)

// Studio
.persons__section
    .hero
        h1
            position: relative
            &::after
                content: ''
                background:
                    image: url('/assets/images/decorations/line_05_white.png')
                    position: center
                    repeat: no-repeat
                    size: cover
                height: pxToRem(16)
                position: absolute
                left: 50%
                top: 200%
                margin-top: space(10)
                transform: translateX(-50%) rotate(90deg)
                width: pxToRem(180)
    .block-gallery--grid
        margin-bottom: 4rem
        min-height: unset
        padding-bottom: 4rem
        padding-top: var(--header-height) !important
        .gallery
            display: flex
            justify-content: space-between
        figure
            max-width: pxToRem(192)
            img
                aspect-ratio: 1
                object-fit: cover
                object-position: top
    @include media-breakpoint-down(desktop)
        .hero
            padding-bottom: 0
            margin-bottom: $spacing-4
            h1::after
                top: 180%
                height: pxToRem(20)
                width: pxToRem(160)
        .block-gallery--grid 
            padding-bottom: 0
            padding-top: 0 !important
            margin-bottom: $spacing-4
            figure
                max-width: columns(4)
        .block-chapter--accent_background
            .text
                text-align: center
    @include media-breakpoint-up(desktop)
        main
            padding-top: var(--header-height)
            .block-gallery--grid
                margin-bottom: 0
                padding-bottom: 0
                .gallery
                    padding-top: $spacing-5
        .hero
            position: absolute
            padding: 0 !important
            margin: 0 !important
            h1::after
                top: 270%
                width: pxToRem(200)
// Projects
.projects__section
    main
        margin-top: var(--header-height)
        .hero
            padding-top: $spacing-5
            .content
                .hero-text
                    margin-top: 0
                    @include media-breakpoint-down(desktop)
                        h1
                            text-align: center
        .container
            max-width: unset
            width: auto
        .projects
            .project
                border-bottom: 0
                &:last-child
                    margin-bottom: 0
                &::after
                    background:
                        image: url('/assets/images/decorations/line_04_black.png')
                        position: left
                        size: cover
                    content: ''
                    height: pxToRem(19)
                    width: 100%
                    bottom: -9.5px
                    position: absolute
                @include media-breakpoint-down(desktop)
                    + .project
                        margin-top: $spacing-5
                    &::after
                        background-position: right
                        bottom: calc(#{-($spacing-5)} / 2 - 6px)
                        height: pxToRem(22)
        @include media-breakpoint-up(desktop)
            .document-content
                .project
                    flex-direction: row
        @include media-breakpoint-up(xl)
            display: flex
            gap: var(--grid-gutter)
            .hero
                flex: 1
                > .container
                    padding-right: 0
                .hero-text
                    width: columns(4)
                    @include media-breakpoint-down(xxl)
                        h1
                            font-size: pxToRem(75)
            .document-content
                flex: 1
                padding-top: space(19)
                > .container
                    padding-left: 0
                .project
                    .project-content
                        width: columns(5)
                        a
                            pointer-events: none
                        .project-title::after
                            display: none
                        .project-subtitle
                            font-size: $body-size
                    &:hover
                        .project-content
                            .project-title 
                                a
                                    color: inherit
                                &::after
                                    display: none
                    .media
                        width: columns(3)
.projects
    .project
        &-description
            @include meta
        .media img
            aspect-ratio: 320/399
        &-content
            .project-title
                line-height: 1
                margin-bottom: 0
            .project-subtitle
                font-style: italic
    @include media-breakpoint-down(desktop)
        .project-content 
            .project-title
                @include h2
                margin-bottom: 0
            hgroup,
            h2
                + div
                    margin-top: $spacing-2
    @include media-breakpoint-up(desktop)
        &.projects--list
            .project        
                margin-bottom: $spacing-4
                padding-bottom: $spacing-4
            .project-description
                display: flex
                flex-direction: column
                justify-content: space-between

// Posts
.posts
    .post
        .media img
            aspect-ratio: 448/312
        .post-content
            flex: 1
            display: flex
            flex-direction: column
            justify-content: space-between
        .post-meta
            display: flex
            align-items: center
            gap: $spacing-2
            &::after
                content: ''
                background:
                    image: url('/assets/images/decorations/line_04_black.png')
                    position: right
                    repeat: no-repeat
                    size: 100%
                height: pxToRem(18)
                flex: 1
                
.posts__page
    @include media-breakpoint-down(desktop)
        header,
        .hero figure
            margin-bottom: var(--grid-gutter)
        .document-content
            .post-sidebar
                margin-bottom: 0
                + .block-summary
                    margin-top: $spacing-3
    .hero 
        @include media-breakpoint-up(desktop)
            .content
                flex-direction: column
                max-width: columns(8)
                padding-top: $spacing-1
                &,
                & > *
                    margin: auto
                figure
                    margin-top: $spacing-4
                    width: columns(6)
                    img
                        aspect-ratio: 704/490
                        object-fit: cover
    &:not(.full-width)
        @include media-breakpoint-up(desktop)
            .post-sidebar
                .toc-container
                    border-top: none
                    margin-top: $spacing-3
                .post-infos 
                    > li
                        border: none
                        position: relative
                        &::after
                            content: ''
                            background:
                                image: url('/assets/images/decorations/line_04_black.png')
                                position: center
                                size: cover
                            height: 18px
                            position: absolute
                            bottom: -9px
                            width: 100%
    .toc-container

    .chapter
        font-family: $heading-font-family
        line-height: $body-normal-line-height-desktop
        @include media-breakpoint-down(desktop)
            font-size: $body-normal-font-size
            line-height: $body-normal-line-height

// Navigation
.posts-navigation,
.siblings-navigation
    border: 0
    ul 
        a
            &, *:not(span)
                font-size: 0
            &:hover
                color: var(--color-text) !important